<!DOCTYPE html>
<html lang="en">
<head>
  <title>t00mterías - Index</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="KB4IT / Asciidoctor 2">
  <meta name="description" content="KB4IT document">
  <meta name="author" content="KB4IT by t00m">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="resources/themes/blog/framework/Highlight/styles/github-dark.css">
  <link rel="stylesheet" href="resources/themes/blog/css/blog.css">
  <link rel="stylesheet" href="resources/themes/blog/framework/uikit/css/uikit.min.css">
  <script src="resources/themes/blog/framework/Highlight/highlight.js"></script>
  <script src="resources/themes/blog/framework/uikit/js/uikit.min.js"></script>
  <script src="resources/themes/blog/framework/uikit/js/uikit-icons.min.js"></script>
  <script src="resources/themes/blog/framework/datatables/js/jquery-3.5.1.js"></script>
  <script src="resources/themes/blog/framework/datatables/js/jquery.dataTables.min.js"></script>
  <script src="resources/themes/blog/framework/datatables/js/dataTables.uikit.min.js"></script>
  <script type="text/javascript" class="init">
        $(document).ready(function() {
            $('#kb4it-datatable').DataTable( {
                dom: '<"kbfilter"flrtip>',
                serverSide: false,
                ordering: true,
                searching: true,
                //~ data:           data,
                deferRender:    true,
                scrollY:        400,
                scrollCollapse: false,
                scroller:       false,
                stateSave: false,
                paging:   false,
                info:     true,
                order: [[ 0, "desc" ]]
            } );
        } );
  </script>
</head>
<body>
    <!-- Blog container :: START -->
    <div class="blog-container uk-container" uk-height-viewport="expand: true">
        <!-- GRID :: START -->
        <div class="uk-grid">
            <!-- Main Content Column :: START-->
            <div class="uk-width-3-4@m">


    <h2 class="uk-card-title uk-text-center">
        <a class="uk-link-toggle" href="index.html"><span class="uk-link-heading">Index</span></a>
    </h2>
<!-- BODY :: START -->
<!-- Template POST_ADOC_INDEX.tpl :: START -->
<!-- Blog Post :: START -->
<div class="uk-card uk-card-small uk-card-body post-card">
    <div class="uk-container uk-container-small">

        <!-- Header -->
        <header class="uk-margin-small-bottom uk-background-muted uk-card-hover">
            <div class="uk-flex uk-flex-middle uk-margin-bottom">
                <div class="uk-width uk-margin-top">
                    <h5 class="uk-card-title uk-margin-remove uk-text-center">
                        <a class="uk-link-toggle" href="20260221_0100.html">
                            <span class="uk-link-heading">Smart Index Generation: A New Approach for Blog Excerpt-Based Indexing</span>
                        </a>
                    </h5>
                    <div class="uk-width uk-margin-top">
                        <ul class="uk-subnav uk-subnav-divider uk-margin-small-top uk-flex-center uk-text-meta">
                            <li>
                                <span uk-icon="user"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="Author_Tomás_Vírseda.html">Tomás Vírseda</a></span>
                            </li>
                            <li>
                                <span uk-icon="calendar"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="events_20260221.html">21</a>/<a class="" target="" href="events_202602.html">02</a>/<a class="" target="" href="events_2026.html">2026</a></span>
                            </li>
                            <!-- Metadata Button :: START -->
                            <li uk-tooltip="title: Document properties">
                                <span uk-icon="hashtag"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-metadata" uk-toggle>Metadata</a>
                                </span>
                                <div id="modal-metadata" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-primary">Metadata</div>
                                                <div class="" style="border: 1px solid transparent;"><table id="kb4it-table-metadata" class="uk-table uk-table-divider uk-table-striped uk-table-hover uk-table-small uk-card uk-card-small uk-card-hover">
<thead class="">
    <tr class="">
        <th class="uk-width-small"><span class="uk-text-bold">Property</span></th>
        <th class=""><span class="uk-text-bold">Values</span></th>
    </tr>
</thead>
<tbody class="">
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Author.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Author</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Author_Tomás_Vírseda.html">
        <span class="uk-padding-small">Tomás Vírseda</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Category.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Category</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Category_Post.html">
        <span class="uk-padding-small">Post</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Product.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Product</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Product_KB4IT.html">
        <span class="uk-padding-small">KB4IT</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Status.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Status</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Status_Published.html">
        <span class="uk-padding-small">Published</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Tag.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Tag</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_theme.html">
        <span class="uk-padding-small">theme</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_blog.html">
        <span class="uk-padding-small">blog</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_index.html">
        <span class="uk-padding-small">index</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_excerpt.html">
        <span class="uk-padding-small">excerpt</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Topic.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Topic</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Development.html">
        <span class="uk-padding-small">Development</span>
    </a>
</div>
</div></td>
    </tr>
</tbody>
<tfoot>
</tfoot>
</table>
</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- Metadata Button :: END -->
                            <!-- View Asciidoc Source Button :: START -->
                            <li uk-tooltip="title: Document source">
                                <span uk-icon="code"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-full-source" uk-toggle>Source</a>
                                </span>
                                <div id="modal-full-source" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-danger">Source</div>
                                                <div class="uk-text-lead">20260221_0100.adoc</div>
                                                <div class=""><textarea id="source-code" class="uk-width-1-1 uk-height-viewport">= Smart Index Generation: A New Approach for Blog Excerpt-Based Indexing

:Author:        Tomás Vírseda
:Category:      Post
:Topic:         Development
:Product:       KB4IT
:Tag:           theme, blog, index, excerpt
:Updated:       2026-02-21 01:00:00
:Status:        Published

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE

== Excerpt

The KB4IT blog theme now features a smarter approach to generating index pages that leverages post excerpts instead of full HTML body content. This refactoring simplifies the index generation workflow by extracting semantically meaningful sections directly from AsciiDoc source files, resulting in more consistent, cleaner, and faster index page generation. The new method eliminates the need to parse complex HTML structures and provides authors with explicit control over how their posts appear in the index.

Building a blog engine requires careful decisions about what readers see when browsing post listings. Extracting full HTML bodies and searching for markers is fragile; small changes to the HTML structure break the system. By shifting to an excerpt-based model backed by AsciiDoc section extraction, we gain reliability, performance, and author control in a single refactoring.

== Disclaimer

CAUTION: This post was generated by an IA... but the code is mine, mostly :)

== The Problem with the Old Approach

Previously, KB4IT generated index pages by extracting the body content from already-compiled HTML files:

* The workflow had to read from generated HTML after compilation
* Index generation was tightly coupled to the HTML structure with fragile marker-based extraction (`<!-- BODY :: START -->` and `<!-- BODY :: END -->`)
* Any changes to the HTML generation template could break index generation
* The process was inefficient: compile to HTML, then parse HTML back to extract content
* Authors had no explicit way to control what appears in the index

This approach worked but was brittle and inefficient. The tight coupling between HTML generation and index generation meant that small template changes could unexpectedly break the index.

== The New Excerpt-Based Solution

The refactored approach introduces a cleaner separation of concerns:

=== New `extract_sections_from_adoc()` Function

A utility function now parses AsciiDoc files directly to extract section information:

[source,python]
----
def extract_sections_from_adoc(file_path):
    """
    Extract sections from an AsciiDoc file.

    Returns a dictionary mapping section names to their start and end line numbers.
    """
    sections = {}
    with open(file_path, 'r') as file:
        lines = file.readlines()

    current_section = None
    start = None

    for i, line in enumerate(lines, 1):
        line = line.rstrip('\n')

        # Check for section headers (== prefix, but not ===)
        if line.startswith('== ') and not line.startswith('==='):
            if current_section:
                sections[current_section] = {
                    'start': start,
                    'end': i - 1
                }
            current_section = line[3:].strip()
            start = i

    if current_section:
        sections[current_section] = {
            'start': start,
            'end': len(lines)
        }

    return sections
----

This lightweight parser operates directly on source files, avoiding HTML entirely.

=== Updated Index Generation Workflow

The `build_page_index()` method in the theme now:

1. Extracts section metadata from each post's AsciiDoc file
2. Checks for an `== Excerpt` section
3. If found, extracts lines between the excerpt section markers
4. Wraps lines in `<p>` tags for clean HTML rendering
5. Falls back to a "Excerpt missing" placeholder if not found

[source,python]
----
sections = extract_sections_from_adoc(adoc_filepath)
excerpt = 'Excerpt' in sections.keys()
if excerpt:
    s = sections['Excerpt']['start']
    e = sections['Excerpt']['end']
    lines = open(adoc_filepath).readlines()
    text = '\n'.join(lines[s+1:e])
    var['post']['Excerpt'] = "\n".join([f"<p>{line}</p>" if line.strip() else line
                                         for line in text.strip().splitlines()])
else:
    var['post']['Excerpt'] = "<p>Excerpt missing</p>"
----

=== Example: Post with Explicit Excerpt

Posts are updated to include an `== Excerpt` section as the first meaningful section:

[source,asciidoc]
----
= Algorithm Complexity Fundamentals

:Author:        Tomás Vírseda
:Category:      Post
// ... other metadata

== Excerpt

Not all code that works is code worth keeping. Two programs can produce identical output while differing wildly in how they scale — one handling a million records gracefully, the other grinding to a halt. Algorithm complexity, expressed through Big O notation, gives us a shared language for describing this behavior independent of hardware, language, or implementation quirks.

Big O describes the worst-case growth rate of an algorithm as input size increases. An O(n) algorithm grows linearly; an O(n²) algorithm, common in naive sorting or nested loops, can become catastrophically slow at scale. Developing an instinct for complexity doesn't require deep mathematical training — it mostly requires the habit of asking, "what happens to this code when the input gets ten times larger?"

== Big-O Notation

// ... rest of the post
----

The index page automatically extracts and displays this excerpt without any manual configuration per post.

== Workflow Improvements

The refactoring also reorders the build pipeline:

[source]
----
Previous Order:
  1. Compilation
  2. Deploy
  3. Theme post activities (including index generation)

New Order:
  1. Compilation
  2. Theme post activities (including index generation)
  3. Deploy
----

This ensures that the index page is generated *before* deployment, making the workflow more logical and predictable.

== Benefits

*Simplicity*:: No more HTML parsing or marker searching. The system works directly with AsciiDoc source.

*Author Control*:: Writers explicitly define what appears in the index by creating an `== Excerpt` section.

*Performance*:: Direct source parsing is faster than compiling HTML and then parsing it back.

*Maintainability*:: Changes to HTML templates no longer risk breaking index generation.

*Consistency*:: All posts follow the same pattern, making the blog feel cohesive.

*Robustness*:: The system gracefully handles missing excerpts with a clear fallback message.

== Example Posts

The demo repository was updated with new posts demonstrating the new approach:

* **Distributed Systems and the CAP Theorem** — Excerpt highlighting consistency-availability tradeoffs
* **Cryptography Fundamentals for Software Engineers** — Excerpt on the core concepts engineers need
* **Introduction to Quantum Computing** — Excerpt introducing qubits and superposition
* **Modern Compiler Design Patterns** — Excerpt on modular compiler architectures
* **Zero-Knowledge Proofs in Cryptography** — Excerpt on privacy-preserving verification

All posts follow the new excerpt pattern, and the index page automatically renders them beautifully.

== Summary

The KB4IT theme's new index generation approach demonstrates a principle that applies far beyond blog engines: work with data as close to its source as possible. By shifting from HTML-based extraction to AsciiDoc section parsing, the system becomes simpler, faster, and more maintainable.

For users building blogs with KB4IT, the change is transparent — just add an `== Excerpt` section to your posts, and the index page will automatically display them. For maintainers, the shift simplifies the codebase and makes future changes safer.

This refactoring is part of KB4IT 0.7.27, currently building toward the next release.
</textarea></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- View Source Button :: END -->
                        </ul>
                    </div>
                    <!-- Tags and Topics -->
                </div>
            </div>
            <hr>
        </header>

        <!-- Body -->
        <article class="uk-article">
            <p>Not all code that works is code worth keeping. Two programs can produce identical output while differing wildly in how they scale — one handling a million records gracefully, the other grinding to a halt. Algorithm complexity, expressed through Big O notation, gives us a shared language for describing this behavior independent of hardware, language, or implementation quirks.</p>



<p>Big O describes the worst-case growth rate of an algorithm as input size increases. An O(n) algorithm grows linearly; an O(n²) algorithm, common in naive sorting or nested loops, can become catastrophically slow at scale. Developing an instinct for complexity doesn't require deep mathematical training — it mostly requires the habit of asking, "what happens to this code when the input gets ten times larger?"</p>
        </article>

        <!-- Footer -->
        <footer class="uk-margin-small-top uk-text-muted">
            <hr>
            <div class="uk-flex uk-flex-between uk-flex-middle">
            </div>
        </footer>
    </div>
</div>
<p></p>
<!-- Template POST_ADOC_INDEX.tpl :: END -->
<!-- Template POST_ADOC_INDEX.tpl :: START -->
<!-- Blog Post :: START -->
<div class="uk-card uk-card-small uk-card-body post-card">
    <div class="uk-container uk-container-small">

        <!-- Header -->
        <header class="uk-margin-small-bottom uk-background-muted uk-card-hover">
            <div class="uk-flex uk-flex-middle uk-margin-bottom">
                <div class="uk-width uk-margin-top">
                    <h5 class="uk-card-title uk-margin-remove uk-text-center">
                        <a class="uk-link-toggle" href="20260216-EAT.html">
                            <span class="uk-link-heading">KB4IT: Worflow amended: Now it EATs</span>
                        </a>
                    </h5>
                    <div class="uk-width uk-margin-top">
                        <ul class="uk-subnav uk-subnav-divider uk-margin-small-top uk-flex-center uk-text-meta">
                            <li>
                                <span uk-icon="user"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="Author_Tomás_Vírseda.html">Tomás Vírseda</a></span>
                            </li>
                            <li>
                                <span uk-icon="calendar"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="events_20260216.html">16</a>/<a class="" target="" href="events_202602.html">02</a>/<a class="" target="" href="events_2026.html">2026</a></span>
                            </li>
                            <!-- Metadata Button :: START -->
                            <li uk-tooltip="title: Document properties">
                                <span uk-icon="hashtag"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-metadata" uk-toggle>Metadata</a>
                                </span>
                                <div id="modal-metadata" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-primary">Metadata</div>
                                                <div class="" style="border: 1px solid transparent;"><table id="kb4it-table-metadata" class="uk-table uk-table-divider uk-table-striped uk-table-hover uk-table-small uk-card uk-card-small uk-card-hover">
<thead class="">
    <tr class="">
        <th class="uk-width-small"><span class="uk-text-bold">Property</span></th>
        <th class=""><span class="uk-text-bold">Values</span></th>
    </tr>
</thead>
<tbody class="">
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Author.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Author</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Author_Tomás_Vírseda.html">
        <span class="uk-padding-small">Tomás Vírseda</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Category.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Category</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Category_Post.html">
        <span class="uk-padding-small">Post</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Product.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Product</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Product_KB4IT.html">
        <span class="uk-padding-small">KB4IT</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Tag.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Tag</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_workflow.html">
        <span class="uk-padding-small">workflow</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_extraction.html">
        <span class="uk-padding-small">extraction</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_analysis.html">
        <span class="uk-padding-small">analysis</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_transformation.html">
        <span class="uk-padding-small">transformation</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Topic.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Topic</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Development.html">
        <span class="uk-padding-small">Development</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Refactoring.html">
        <span class="uk-padding-small">Refactoring</span>
    </a>
</div>
</div></td>
    </tr>
</tbody>
<tfoot>
</tfoot>
</table>
</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- Metadata Button :: END -->
                            <!-- View Asciidoc Source Button :: START -->
                            <li uk-tooltip="title: Document source">
                                <span uk-icon="code"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-full-source" uk-toggle>Source</a>
                                </span>
                                <div id="modal-full-source" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-danger">Source</div>
                                                <div class="uk-text-lead">20260216-EAT.adoc</div>
                                                <div class=""><textarea id="source-code" class="uk-width-1-1 uk-height-viewport">= KB4IT: Worflow amended: Now it EATs

:Author:        Tomás Vírseda
:Category:      Post
:Topic:         Development, Refactoring
:Product:       KB4IT
:Tag:           workflow, extraction, analysis, transformation
:Updated:       2026-02-16 17:30:00

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE

== Excerpt

Over the past few weeks, I refactored a spaghetti backend module into four services: Backend, Processor (using EAT approach), Compiler, and Deployer.

== Refatoring: Extraction, Analysis and Transformation

During the last weeks, I've spent quite sometime refactoring backend module's spaguetti code.
This leaded to split this service in four new modules: backend, processor, compiler and deployer.

. *Backend*: keep on charge of checking the environment and coordinate some service intializations
. *Processor*: this service follow an EAT approach:
.. *Extraction*: consumes sources and get all documents properties
.. *Analysis*: decides which documents, keys (and values for these keys) need to be compilated again
.. *Transformation*: sends key/values to theme to produce the final asciidoc sources
. *Compiler*: once the transformation is finished, KB4IT starts compiling all documents produced
. *Deployer*: finally, after compilation, the new site is deployed: target directory is refreshed and temporary dirs are cleaned. Cache is kept so the next execution, KB4IT can decide what must be compiled (if not forced)

Themes updated accordingly to use new capabilities.
</textarea></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- View Source Button :: END -->
                        </ul>
                    </div>
                    <!-- Tags and Topics -->
                </div>
            </div>
            <hr>
        </header>

        <!-- Body -->
        <article class="uk-article">
            <p>Over the past few weeks, I refactored a spaghetti backend module into four services: Backend, Processor (using EAT approach), Compiler, and Deployer.</p>
        </article>

        <!-- Footer -->
        <footer class="uk-margin-small-top uk-text-muted">
            <hr>
            <div class="uk-flex uk-flex-between uk-flex-middle">
            </div>
        </footer>
    </div>
</div>
<p></p>
<!-- Template POST_ADOC_INDEX.tpl :: END -->
<!-- Template POST_ADOC_INDEX.tpl :: START -->
<!-- Blog Post :: START -->
<div class="uk-card uk-card-small uk-card-body post-card">
    <div class="uk-container uk-container-small">

        <!-- Header -->
        <header class="uk-margin-small-bottom uk-background-muted uk-card-hover">
            <div class="uk-flex uk-flex-middle uk-margin-bottom">
                <div class="uk-width uk-margin-top">
                    <h5 class="uk-card-title uk-margin-remove uk-text-center">
                        <a class="uk-link-toggle" href="python3-dev.html">
                            <span class="uk-link-heading">Useful links for Python developers</span>
                        </a>
                    </h5>
                    <div class="uk-width uk-margin-top">
                        <ul class="uk-subnav uk-subnav-divider uk-margin-small-top uk-flex-center uk-text-meta">
                            <li>
                                <span uk-icon="user"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="Author_Tomás_Vírseda.html">Tomás Vírseda</a></span>
                            </li>
                            <li>
                                <span uk-icon="calendar"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="events_20260111.html">11</a>/<a class="" target="" href="events_202601.html">01</a>/<a class="" target="" href="events_2026.html">2026</a></span>
                            </li>
                            <!-- Metadata Button :: START -->
                            <li uk-tooltip="title: Document properties">
                                <span uk-icon="hashtag"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-metadata" uk-toggle>Metadata</a>
                                </span>
                                <div id="modal-metadata" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-primary">Metadata</div>
                                                <div class="" style="border: 1px solid transparent;"><table id="kb4it-table-metadata" class="uk-table uk-table-divider uk-table-striped uk-table-hover uk-table-small uk-card uk-card-small uk-card-hover">
<thead class="">
    <tr class="">
        <th class="uk-width-small"><span class="uk-text-bold">Property</span></th>
        <th class=""><span class="uk-text-bold">Values</span></th>
    </tr>
</thead>
<tbody class="">
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Author.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Author</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Author_Tomás_Vírseda.html">
        <span class="uk-padding-small">Tomás Vírseda</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Bookmark.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Bookmark</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Bookmark_Yes.html">
        <span class="uk-padding-small">Yes</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Category.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Category</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Category_Post.html">
        <span class="uk-padding-small">Post</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Product.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Product</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Product_Python.html">
        <span class="uk-padding-small">Python</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Programming_Language.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Programming Language</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Programming_Language_Python.html">
        <span class="uk-padding-small">Python</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Tag.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Tag</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_awesome.html">
        <span class="uk-padding-small">awesome</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_framework.html">
        <span class="uk-padding-small">framework</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_library.html">
        <span class="uk-padding-small">library</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_resource.html">
        <span class="uk-padding-small">resource</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_algorithm.html">
        <span class="uk-padding-small">algorithm</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Topic.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Topic</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Development.html">
        <span class="uk-padding-small">Development</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Documentation.html">
        <span class="uk-padding-small">Documentation</span>
    </a>
</div>
</div></td>
    </tr>
</tbody>
<tfoot>
</tfoot>
</table>
</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- Metadata Button :: END -->
                            <!-- View Asciidoc Source Button :: START -->
                            <li uk-tooltip="title: Document source">
                                <span uk-icon="code"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-full-source" uk-toggle>Source</a>
                                </span>
                                <div id="modal-full-source" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-danger">Source</div>
                                                <div class="uk-text-lead">python3-dev.adoc</div>
                                                <div class=""><textarea id="source-code" class="uk-width-1-1 uk-height-viewport">= Useful links for Python developers
:Author:                Tomás Vírseda
:Category:              Post
:Topic:                 Development, Documentation
:Product:               Python
:Tag:                   awesome, framework, library, resource, algorithm
:Programming Language:  Python
:Bookmark:              Yes
:Updated:               2026-01-11 20:50:00

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE

== Excerpt

List of python resources for developers

== Main courses

* https://www.python.org/[Python]: Python is a programming language that lets you work quickly and integrate systems more effectively.
* https://pypi.org/[Pypi]: Find, install and publish Python packages with the Python Package Index.

== Awesome Python

* https://github.com/vinta/awesome-python[Awesome Python]: An opinionated list of awesome Python frameworks, libraries, software and resources.

== Unsorted topics

* https://zetcode.com/python/[ZetCode Python tutorials]

== Data Structures and Algorithms

* https://github.com/Gaurav14cs17/DSA[Gaurav14cs17 / DSA]: A well-organized repository covering core Data Structures and Algorithms, from fundamentals to advanced topics.
</textarea></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- View Source Button :: END -->
                        </ul>
                    </div>
                    <!-- Tags and Topics -->
                </div>
            </div>
            <hr>
        </header>

        <!-- Body -->
        <article class="uk-article">
            <p>List of python resources for developers</p>
        </article>

        <!-- Footer -->
        <footer class="uk-margin-small-top uk-text-muted">
            <hr>
            <div class="uk-flex uk-flex-between uk-flex-middle">
            </div>
        </footer>
    </div>
</div>
<p></p>
<!-- Template POST_ADOC_INDEX.tpl :: END -->
<!-- Template POST_ADOC_INDEX.tpl :: START -->
<!-- Blog Post :: START -->
<div class="uk-card uk-card-small uk-card-body post-card">
    <div class="uk-container uk-container-small">

        <!-- Header -->
        <header class="uk-margin-small-bottom uk-background-muted uk-card-hover">
            <div class="uk-flex uk-flex-middle uk-margin-bottom">
                <div class="uk-width uk-margin-top">
                    <h5 class="uk-card-title uk-margin-remove uk-text-center">
                        <a class="uk-link-toggle" href="20251231-1400-log_module.html">
                            <span class="uk-link-heading">A log module for KB4IT</span>
                        </a>
                    </h5>
                    <div class="uk-width uk-margin-top">
                        <ul class="uk-subnav uk-subnav-divider uk-margin-small-top uk-flex-center uk-text-meta">
                            <li>
                                <span uk-icon="user"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="Author_Tomás_Vírseda.html">Tomás Vírseda</a></span>
                            </li>
                            <li>
                                <span uk-icon="calendar"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="events_20260111.html">11</a>/<a class="" target="" href="events_202601.html">01</a>/<a class="" target="" href="events_2026.html">2026</a></span>
                            </li>
                            <!-- Metadata Button :: START -->
                            <li uk-tooltip="title: Document properties">
                                <span uk-icon="hashtag"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-metadata" uk-toggle>Metadata</a>
                                </span>
                                <div id="modal-metadata" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-primary">Metadata</div>
                                                <div class="" style="border: 1px solid transparent;"><table id="kb4it-table-metadata" class="uk-table uk-table-divider uk-table-striped uk-table-hover uk-table-small uk-card uk-card-small uk-card-hover">
<thead class="">
    <tr class="">
        <th class="uk-width-small"><span class="uk-text-bold">Property</span></th>
        <th class=""><span class="uk-text-bold">Values</span></th>
    </tr>
</thead>
<tbody class="">
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Author.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Author</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Author_Tomás_Vírseda.html">
        <span class="uk-padding-small">Tomás Vírseda</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Category.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Category</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Category_Post.html">
        <span class="uk-padding-small">Post</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Product.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Product</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Product_KB4IT.html">
        <span class="uk-padding-small">KB4IT</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Programming_Language.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Programming Language</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Programming_Language_Python.html">
        <span class="uk-padding-small">Python</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Tag.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Tag</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_logging.html">
        <span class="uk-padding-small">logging</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_redirect.html">
        <span class="uk-padding-small">redirect</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_filehandler.html">
        <span class="uk-padding-small">filehandler</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Topic.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Topic</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Development.html">
        <span class="uk-padding-small">Development</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Troubleshooting.html">
        <span class="uk-padding-small">Troubleshooting</span>
    </a>
</div>
</div></td>
    </tr>
</tbody>
<tfoot>
</tfoot>
</table>
</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- Metadata Button :: END -->
                            <!-- View Asciidoc Source Button :: START -->
                            <li uk-tooltip="title: Document source">
                                <span uk-icon="code"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-full-source" uk-toggle>Source</a>
                                </span>
                                <div id="modal-full-source" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-danger">Source</div>
                                                <div class="uk-text-lead">20251231-1400-log_module.adoc</div>
                                                <div class=""><textarea id="source-code" class="uk-width-1-1 uk-height-viewport">= A log module for KB4IT

:Author:                Tomás Vírseda
:Category:              Post
:Topic:                 Development, Troubleshooting
:Product:               KB4IT
:Tag:                   logging, redirect, filehandler
:Programming Language:  Python
:Updated:               2026-01-11 13:35:00

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE

== Excerpt

A very useful log module to allow redirecting logs to another file in runtime.

KB4IT needs this feature to redirect logs to the right file when a new instance is executed.

== Features

* *Log redirection*: when KB4IT is executed, it doesn't know which application is going to be executed, so the first logs are sent to a temporary log directory. Once the backend is aware about which app (or project) is started, temporary logs are copied to the right destination and the log module redirects the logging there. In this way, the user have the complete trace.
* *Distinct levels for console and file handlers*: Console handler (the output displayed in the workflow) is set by default to level INFO (minimum). For troubleshooting purposes, the whole trace with level DEBUG is sent to the log file.
+
[source]
----
Run kb4it -L INFO build config/blog.json -w 8

      INFO |   99 | Workflow             | 11/01/2026 12:38:45.751 | Building a website for repository 't00mterías'
      INFO |  100 | Workflow             | 11/01/2026 12:38:45.751 | Using theme 'blog'
      INFO |  101 | Workflow             | 11/01/2026 12:38:45.751 | Check environment
      INFO |  103 | Workflow             | 11/01/2026 12:38:45.760 | Allow theme to generate sources
      INFO |  106 | Workflow             | 11/01/2026 12:38:45.760 | Get source documents
   WARNING |  352 | Backend              | 11/01/2026 12:38:45.760 |   - Added missing 'About App' to your sources
      INFO |  108 | Workflow             | 11/01/2026 12:38:45.761 | Preprocessing
      INFO |  110 | Workflow             | 11/01/2026 12:38:45.844 | Backend processing
      INFO |  112 | Workflow             | 11/01/2026 12:38:45.877 | Theme processing
      INFO |  114 | Workflow             | 11/01/2026 12:38:45.927 | Compilation
      INFO |  116 | Workflow             | 11/01/2026 12:38:52.129 | Clean up target
      INFO |  118 | Workflow             | 11/01/2026 12:38:52.161 | Refresh target
      INFO |  120 | Workflow             | 11/01/2026 12:38:52.306 | Theme post activities
      INFO |  123 | Workflow             | 11/01/2026 12:38:52.467 | Repository website built
      INFO |  124 | Workflow             | 11/01/2026 12:38:52.467 | URL: /home/runner/work/blog/blog/docs/index.html
      INFO |  125 | Workflow             | 11/01/2026 12:38:52.467 | Full log: /home/runner/work/blog/blog/var/log/homerunnerworkblogblogsource.log
      INFO |  126 | Workflow             | 11/01/2026 12:38:52.467 | The End
----

== Code

[source, python]
----
#!/usr/bin/python
# -*- coding: utf-8 -*-

"""
Log module.
File: log.py
Author: Tomás Vírseda
License: GPL v3
"""

import logging

_PATTERN = (
    "%(levelname)10s | %(lineno)4d | %(name)-20s | "
    "%(asctime)s.%(msecs)03d | %(message)s"
)

_DATEFMT = "%d/%m/%Y %H:%M:%S"


def setup_logging(
    level: str = "INFO",
    logfile: str | None = None,
):
    """
    Configure root logger once.
    """

    if level is not None:
        level_dict = {
            'DEBUG': logging.DEBUG,
            'INFO': logging.INFO,
            'WARNING': logging.WARNING,
            'ERROR': logging.ERROR,
            'CRITICAL': logging.CRITICAL
        }
        severity = level_dict.get(level, logging.DEBUG)
    else:
        severity = logging.INFO

    root = logging.getLogger()
    root.setLevel(logging.DEBUG)

    if root.handlers:
        return  # Already configured

    formatter = logging.Formatter(_PATTERN, datefmt=_DATEFMT)

    # Console handler
    console = logging.StreamHandler()
    console.setFormatter(formatter)
    console.setLevel(severity)
    root.addHandler(console)

    # File handler
    file_handler = logging.FileHandler(logfile, mode="w")
    file_handler.setFormatter(formatter)
    root.addHandler(file_handler)


def get_logger(name: str) -> logging.Logger:
    """
    Return a named logger.
    """
    return logging.getLogger(name)


def redirect_logs(logfile: str):
    """
    Redirect logging to a new file at runtime.
    """
    root = logging.getLogger()

    formatter = logging.Formatter(_PATTERN, datefmt=_DATEFMT)

    # Remove only existing FileHandlers
    for handler in root.handlers[:]:
        if isinstance(handler, logging.FileHandler):
            handler.flush()
            handler.close()
            root.removeHandler(handler)

    # Add new file handler
    file_handler = logging.FileHandler(logfile, mode="a")
    file_handler.setFormatter(formatter)
    file_handler.setLevel(logging.DEBUG)
    root.addHandler(file_handler)
----

</textarea></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- View Source Button :: END -->
                        </ul>
                    </div>
                    <!-- Tags and Topics -->
                </div>
            </div>
            <hr>
        </header>

        <!-- Body -->
        <article class="uk-article">
            <p>A very useful log module to allow redirecting logs to another file in runtime.</p>



<p>KB4IT needs this feature to redirect logs to the right file when a new instance is executed.</p>
        </article>

        <!-- Footer -->
        <footer class="uk-margin-small-top uk-text-muted">
            <hr>
            <div class="uk-flex uk-flex-between uk-flex-middle">
            </div>
        </footer>
    </div>
</div>
<p></p>
<!-- Template POST_ADOC_INDEX.tpl :: END -->
<!-- Template POST_ADOC_INDEX.tpl :: START -->
<!-- Blog Post :: START -->
<div class="uk-card uk-card-small uk-card-body post-card">
    <div class="uk-container uk-container-small">

        <!-- Header -->
        <header class="uk-margin-small-bottom uk-background-muted uk-card-hover">
            <div class="uk-flex uk-flex-middle uk-margin-bottom">
                <div class="uk-width uk-margin-top">
                    <h5 class="uk-card-title uk-margin-remove uk-text-center">
                        <a class="uk-link-toggle" href="20251228-KB4IT-incremental-compiling.html">
                            <span class="uk-link-heading">KB4IT incremental compiling in Github (experimental)</span>
                        </a>
                    </h5>
                    <div class="uk-width uk-margin-top">
                        <ul class="uk-subnav uk-subnav-divider uk-margin-small-top uk-flex-center uk-text-meta">
                            <li>
                                <span uk-icon="user"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="Author_Tomás_Vírseda.html">Tomás Vírseda</a></span>
                            </li>
                            <li>
                                <span uk-icon="calendar"></span>
                                <span class="uk-margin-small-left"><a class="" target="" href="events_20260111.html">11</a>/<a class="" target="" href="events_202601.html">01</a>/<a class="" target="" href="events_2026.html">2026</a></span>
                            </li>
                            <!-- Metadata Button :: START -->
                            <li uk-tooltip="title: Document properties">
                                <span uk-icon="hashtag"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-metadata" uk-toggle>Metadata</a>
                                </span>
                                <div id="modal-metadata" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-primary">Metadata</div>
                                                <div class="" style="border: 1px solid transparent;"><table id="kb4it-table-metadata" class="uk-table uk-table-divider uk-table-striped uk-table-hover uk-table-small uk-card uk-card-small uk-card-hover">
<thead class="">
    <tr class="">
        <th class="uk-width-small"><span class="uk-text-bold">Property</span></th>
        <th class=""><span class="uk-text-bold">Values</span></th>
    </tr>
</thead>
<tbody class="">
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Author.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Author</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Author_Tomás_Vírseda.html">
        <span class="uk-padding-small">Tomás Vírseda</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Category.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Category</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Category_Post.html">
        <span class="uk-padding-small">Post</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Product.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Product</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Product_KB4IT.html">
        <span class="uk-padding-small">KB4IT</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Product_Github_Actions.html">
        <span class="uk-padding-small">Github Actions</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Tag.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Tag</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_incremental.html">
        <span class="uk-padding-small">incremental</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_compiling.html">
        <span class="uk-padding-small">compiling</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_vm.html">
        <span class="uk-padding-small">vm</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_workflow.html">
        <span class="uk-padding-small">workflow</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_cache.html">
        <span class="uk-padding-small">cache</span>
    </a>
</div>
</div></td>
    </tr>
    <tr class="">
        <td class="">
            <a class="uk-link-text" href="Topic.html">
                <div class="uk-text-bolder uk-text-secondary uk-text-bold uk-text-meta">Topic</div>
            </a>
        </td>
        <td class=""><div class="uk-flex uk-flex-row uk-flex-wrap uk-text-meta"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Development.html">
        <span class="uk-padding-small">Development</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Topic_Automation.html">
        <span class="uk-padding-small">Automation</span>
    </a>
</div>
</div></td>
    </tr>
</tbody>
<tfoot>
</tfoot>
</table>
</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- Metadata Button :: END -->
                            <!-- View Asciidoc Source Button :: START -->
                            <li uk-tooltip="title: Document source">
                                <span uk-icon="code"></span>
                                <span class="uk-margin-small-left">
                                    <a class="" target="" href="#modal-full-source" uk-toggle>Source</a>
                                </span>
                                <div id="modal-full-source" class="uk-modal-full" uk-modal>
                                    <div class="uk-modal-dialog uk-height-viewport">
                                        <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                        <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                            <div class="uk-padding-large uk-background-muted">
                                                <div class="uk-text-lead uk-text-center uk-text-danger">Source</div>
                                                <div class="uk-text-lead">20251228-KB4IT-incremental-compiling.adoc</div>
                                                <div class=""><textarea id="source-code" class="uk-width-1-1 uk-height-viewport">= KB4IT incremental compiling in Github (experimental)

:Author:        Tomás Vírseda
:Category:      Post
:Topic:         Development, Automation
:Product:       KB4IT, Github Actions
:Tag:           incremental, compiling, vm, workflow, cache,
:Updated:       2026-01-11 13:30:00

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE

== Excerpt

These days, after several fixes, I was able to produce a reliable incremental compiling of my knowledge base repositories (or force a whole compilation of the whole KB, if the app meets some conditions).

To my initial surprise, it didn't work in Github.

== Github actions

In Github, when a new update is detected in the source directory, the Github action in charge (https://github.com/t00m/blog/blob/main/.github/workflows/update-blog.yml[update-blog.yml]) of updating the website is executed.

GitHub Actions runners are ephemeral. Every workflow run starts on a fresh VM, so anything written to disk is lost unless you explicitly persist it somewhere.

== Solution

Now, instead using `.kb4it` directory under `$USER` directory, it uses the own Github repository.
Then, once kb4it finishes the compilation, all changes are pushed automatically.

[source, yaml]
----
      # Commit changes
      - name: Commit and push changes (if any)
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'

          # Stage all changes in docs/
          git add docs/
          git add var/

          # Check if there are changes to commit
          if git diff --staged --quiet; then
            echo "No changes to commit."
          else
            git commit -m "Auto-update target/ after KB4IT build [$(date -u)]"
            git push
          fi
----
</textarea></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <!-- View Source Button :: END -->
                        </ul>
                    </div>
                    <!-- Tags and Topics -->
                </div>
            </div>
            <hr>
        </header>

        <!-- Body -->
        <article class="uk-article">
            <p>These days, after several fixes, I was able to produce a reliable incremental compiling of my knowledge base repositories (or force a whole compilation of the whole KB, if the app meets some conditions).</p>



<p>To my initial surprise, it didn't work in Github.</p>
        </article>

        <!-- Footer -->
        <footer class="uk-margin-small-top uk-text-muted">
            <hr>
            <div class="uk-flex uk-flex-between uk-flex-middle">
            </div>
        </footer>
    </div>
</div>
<p></p>
<!-- Template POST_ADOC_INDEX.tpl :: END -->
<!-- BODY :: END -->
                </div>
                <!-- Sidebar Column :: START-->
                <div class="uk-width-1-4@m" uk-height-viewport="expand: true">
                  <div class="uk-sticky" uk-sticky="offset: 40">
                    <h2 class="uk-heading-line uk-text-center uk-margin-remove">
                        <a class="uk-link-toggle" href="index.html">
                        <span class="uk-link-heading">t00mterías</span>
                        </a>
                    </h2>
                    <div class="uk-flex uk-flex-top uk-flex-center uk-margin">
            <blockquote>
            <p class="uk-text-center">My public notes</p>
            </blockquote>
            </div>

        <div class="uk-card uk-card-body uk-card-small uk-flex uk-flex-top uk-flex-left">
        <ul class="uk-list uk-text-left uk-margin-left">
                <li>
                    <span uk-icon="icon: plus" uk-tooltip="Create new post"></span>
                    <a class="uk-link-heading" href="https://github.com/t00m/blog/new/main/source" target="_blank">
                        <span class="uk-link-toogle uk-margin-left">Create new post</span>
                    </a>
                </li>
                <li>
                    <span uk-icon="icon: list" uk-tooltip="All posts"></span>
                    <a class="uk-link-heading" href="all.html">
                        <span class="uk-link-toogle uk-margin-left">All documents</span>
                    </a>
                </li>
                <li>
                    <span uk-icon="icon: star" uk-tooltip="Bookmarks"></span>
                    <a class="uk-link-heading" href="bookmarks.html">
                        <span class="uk-link-toogle uk-margin-left">Bookmarks</span>
                    </a>
                </li>
                <li>
                    <span uk-icon="icon: world" uk-tooltip="Browse by metadata"></span>
                    <a class="uk-link-heading" href="properties.html">
                        <span class="uk-link-toogle uk-margin-left">Metadata</span>
                    </a>
                </li>
                <li>
                    <span uk-icon="icon: calendar" uk-tooltip="Posts by year"></span>
                    <a class="uk-link-heading" href="events.html">
                        <span class="uk-link-toogle uk-margin-left">Archive</span>
                    </a>
                </li>
                <li class="uk-nav-divider"></li>
                <li>
                    <span uk-icon="icon: info" uk-tooltip="About"></span>
                    <a class="uk-link-heading" href="about_app.html">
                        <span class="uk-link-toogle uk-margin-left">About</span>
                    </a>
                </li>
        </ul>
    </div>
                      <div class="uk-text-center uk-card uk-card-body uk-card-big">
                        <hr class="uk-divider-icon">
                        <p>
                            <span class="uk-link">
                                <a href="about_kb4it.html">
                                    <img src="resources/common/images/kb4it-badge-built-with.svg">
                                </a>
                            </span>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Sidebar Column :: END-->
            </div>
            <!-- Main Content Column :: END-->
        </div>
        <!-- GRID :: END -->
    </div>
    <!-- Blog container :: END -->
<script>hljs.highlightAll();</script>
<script>
<!-- Necessary javascript for filtering results -->
<!-- Hack found in: https://codepen.io/acidrums4/pen/GBpYbO -->
var input = document.getElementById('text_filter');
var filter = document.getElementById('filter');

input.addEventListener( 'keyup', function(event)
{
    if ( input.value == "" )
    {
        filter.setAttribute( 'uk-filter-control', '' );
    }

    else
    {
        filter.setAttribute( 'uk-filter-control', 'filter:[data-title*=\'' + input.value + '\'i]' );
    }

    filter.click();
});
</script>
</body>
</html>
